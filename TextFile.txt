BEGIN
	SELECT M.*, '<table class="classForDescription"><tr><td>' + M.[Message] + '</td></tr></table>' AS 'ShortMessage', MS.MessageStatusName, MT.MessageType 
	FROM dbo.[Messages] AS M
	Left outer JOIN MessageStatus AS MS ON M.MessageStatusId = MS.MessageStatusId
	Left Outer JOIN MessageType AS MT ON M.MessageTypeId = MT.MessageTypeId
	WHERE 1 = CASE WHEN @MessageId = 0 THEN 1 ELSE CASE WHEN M.MessageId = @MessageId THEN 1 ELSE 0 END END
	AND M.IsDeleted = 0
END